<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
<title>Jogos Entre Amigos</title>
<link rel="manifest" href="manifest.json">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="theme-color" content="#FFD700">
<meta name="apple-mobile-web-app-title" content="JEA Hub">
<link rel="apple-touch-icon" href="icon-192.png">

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js').then(reg => console.log('SW OK'));
  }
</script>

<style>
/* --- ESTILOS ORIGINAIS DO HUB [PRESERVADOS] --- */
:root { --bg: #030207; --gold: #FFD700; --text: #ffffff; }
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body { 
  margin: 0; background: var(--bg); color: var(--text); 
  font-family: 'Inter', sans-serif; height: 100dvh; overflow: hidden; 
  display: flex; justify-content: center;
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
}

#hub {
  width: 100%; max-width: 500px; height: 100%; 
  display: flex; flex-direction: column;
  background: radial-gradient(circle at top, #1a1625 0%, #030207 100%);
  position: relative;
}

.header { padding: 15px 20px 5px; text-align: center; flex-shrink: 0; }
.header h1 { font-size: 0.7rem; letter-spacing: 5px; opacity: 0.4; margin: 0; font-weight: 900; text-transform: uppercase; }

.carousel-container {
    flex: 1; position: relative;
    display: flex; align-items: center; justify-content: center;
    perspective: 1200px; overflow: hidden;
}

#gameCarousel { width: 100%; height: 100%; position: relative; display: flex; align-items: center; justify-content: center; transform-style: preserve-3d; }

.game-card {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 88%; 
    height: 85%; 
    max-height: 560px; 
    border-radius: 40px; padding: 25px 20px;
    display: flex; flex-direction: column; align-items: center; text-align: center; 
    justify-content: space-between;
    transition: all 0.8s cubic-bezier(0.2, 1, 0.3, 1);
    background: rgba(255, 255, 255, 0.05); 
    backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.1); user-select: none; overflow: hidden;
}

.card-active { z-index: 10; transform: translate(-50%, -50%) scale(1); opacity: 1; border-color: var(--c); box-shadow: 0 20px 50px rgba(0,0,0,0.8), 0 0 30px rgba(var(--rgb), 0.2); }
.card-left { z-index: 5; transform: translate(-100%, -50%) scale(0.8) rotateY(25deg); opacity: 0.2; filter: blur(3px); }
.card-right { z-index: 5; transform: translate(0%, -50%) scale(0.8) rotateY(-25deg); opacity: 0.2; filter: blur(3px); }
.card-hidden { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }

.game-icon-slot { font-size: 5.5rem; flex-shrink: 0; }
.game-info { flex: 1; display: flex; flex-direction: column; justify-content: center; }
.game-info h2 { font-size: 2rem; margin: 0; font-weight: 900; text-transform: uppercase; color: var(--c); line-height: 1; }
.game-info p { font-size: 0.9rem; opacity: 0.7; margin: 10px 0; line-height: 1.4; }

.game-meta { width: 100%; }
.tags { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; margin-bottom: 12px; }
.tag { font-size: 0.6rem; padding: 8px; border-radius: 10px; background: rgba(var(--rgb), 0.15); font-weight: 800; color: var(--c); text-transform: uppercase; }

.btn-play { width: 100%; padding: 20px; border-radius: 25px; border: none; font-size: 1.1rem; font-weight: 900; cursor: pointer; background: var(--c); color: #000; }

/* =========================================================
   âœ… CORREÃ‡ÃƒO (sem mudar vinheta nem JS):
   O JS usa classes "style-xxx", entÃ£o o CSS agora aceita
   "style-xxx" E "xxx" para manter todo o visual original.
========================================================= */
.sintonia, .style-sintonia { --c: #00d4ff; --rgb: 0, 212, 255; }
.nempensar, .style-nempensar { --c: #FFD700; --rgb: 255, 215, 0; }
.letras, .style-letras { --c: #9b7cff; --rgb: 155, 124, 255; }
.imperium, .style-imperium { --c: #ff0033; --rgb: 255, 0, 51; }
.conhece, .style-conhece { --c: #2dd36f; --rgb: 45, 211, 111; }
.eco, .style-eco { --c: #4dd0e1; --rgb: 77, 208, 225; }

.nav-dots { display: flex; gap: 10px; justify-content: center; padding: 10px 0 20px; }
.dot { width: 8px; height: 8px; border-radius: 4px; background: rgba(255,255,255,0.1); transition: 0.4s; }
.dot.active { width: 30px; background: var(--gold); }

/* --- ESTILOS DA VINHETA [PRESERVADOS] --- */
#vinheta-layer {
  position: fixed; inset: 0; background: var(--bg);
  z-index: 9999; display: flex; justify-content: center; align-items: center;
  cursor: pointer;
}

#intro-container {
    width: 100%; max-width: 500px; height: 100%;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    position: relative;
}

.tap-hint {
    position: absolute; font-size: 1.1rem; text-transform: uppercase; 
    letter-spacing: 4px; font-weight: 900; color: var(--gold);
    animation: blink 1.5s infinite; z-index: 10;
}

.logo-wrapper { display: none; flex-direction: column; align-items: center; justify-content: center; }
.logo-wrapper.active { display: flex; }

#jea-logo {
    width: 250px; height: 250px;
    filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.4));
    animation: logoEntrance 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

.phrase {
    margin-top: 30px; font-size: 1.1rem; font-weight: 400; color: rgba(255,255,255,0.9);
    font-family: 'Segoe UI', system-ui, sans-serif; font-style: italic;
    opacity: 0; animation: fadeIn 1s forwards 0.8s;
}

@keyframes logoEntrance {
    0% { transform: scale(0.5) rotate(-10deg); opacity: 0; }
    100% { transform: scale(1) rotate(0deg); opacity: 1; }
}

@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes blink { 0%, 100% { opacity: 0.2; } 50% { opacity: 1; } }

#mute-toggle {
    position: fixed; top: 20px; left: 20px; z-index: 10000;
    background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
    color: white; border-radius: 50%; width: 40px; height: 40px;
    display: flex; align-items: center; justify-content: center; cursor: pointer;
}
</style>
</head>
<body>

<div id="mute-toggle" onclick="toggleMute(event)">ðŸ”Š</div>

<div id="vinheta-layer" onclick="iniciarAbertura()">
    <div id="intro-container">
        <div class="tap-hint" id="hint">Toque para entrar</div>
        <div class="logo-wrapper" id="logo-box">
            <svg id="jea-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
              <circle cx="50" cy="50" r="48" fill="#FFD700"/>
              <defs>
                <path id="pathTop" d="M 20,50 A 30,30 0 1,1 80,50" fill="none" />
                <path id="pathBottom" d="M 12,50 A 38,38 0 0,0 88,50" fill="none" />
              </defs>
              <text font-family="Arial Black, Arial" font-weight="900" font-size="12" fill="#030207" style="letter-spacing: 1px;">
                <textPath href="#pathTop" startOffset="50%" text-anchor="middle">JOGOS</textPath>
              </text>
              <g transform="translate(0, -2)">
                <rect x="31" y="36" width="20" height="32" rx="3" fill="#030207" opacity="0.4" transform="rotate(-20 41 52)"/>
                <rect x="49" y="36" width="20" height="32" rx="3" fill="#030207" opacity="0.7" transform="rotate(20 59 52)"/>
                <rect x="40" y="33" width="20" height="32" rx="3" fill="#030207" stroke="#FFD700" stroke-width="1"/>
                <circle cx="50" cy="39" r="2" fill="#FFD700"/>
              </g>
              <text font-family="Arial Black, Arial" font-weight="900" font-size="10.5" fill="#030207" style="letter-spacing: 0.5px;">
                <textPath href="#pathBottom" startOffset="50%" text-anchor="middle">ENTRE AMIGOS</textPath>
              </text>
            </svg>
            <div class="phrase">"Onde o celular nÃ£o distancia, aproxima."</div>
        </div>
    </div>
</div>

<div id="hub">
    <div class="header"><h1>Jogos Entre Amigos</h1></div>
    <div class="carousel-container">
        <div id="gameCarousel"></div>
    </div>
    <div class="nav-dots" id="dots"></div>
</div>

<script>
let audioCtx = null;
let iniciado = false;
let isMuted = false;

// FunÃ§Ã£o base para sons
function playS(f, t='sine', d=0.1, delay=0, vol=0.1) {
    if (isMuted) return;
    try {
        if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const time = audioCtx.currentTime + delay;
        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        o.type = t;
        o.frequency.setValueAtTime(f, time);
        g.gain.setValueAtTime(vol, time);
        g.gain.exponentialRampToValueAtTime(0.0001, time + d);
        o.connect(g); g.connect(audioCtx.destination);
        o.start(time); o.stop(time + d);
    } catch(e) { console.error("Erro Ãudio:", e); }
}

// Som de Deslize (Swipe)
function playSwipeS() {
    if (isMuted) return;
    playS(600, 'sine', 0.15, 0, 0.05); // Som sutil e rÃ¡pido
}

function toggleMute(e) {
    e.stopPropagation();
    isMuted = !isMuted;
    document.getElementById('mute-toggle').innerText = isMuted ? 'ðŸ”‡' : 'ðŸ”Š';
}

function iniciarAbertura() {
    if (iniciado) return;
    iniciado = true;
    
    document.getElementById('hint').style.display = 'none';
    document.getElementById('logo-box').classList.add('active');

    // SequÃªncia da vinheta
    [440, 554, 659, 880].forEach((freq, i) => playS(freq, 'sine', 0.1, i * 0.08, 0.07));

    setTimeout(() => {
        playS(523, 'sine', 1.2, 0, 0.1);
        playS(100, 'triangle', 0.3, 0, 0.15);
    }, 320);

    setTimeout(() => {
        const layer = document.getElementById('vinheta-layer');
        layer.style.transition = "opacity 1s ease";
        layer.style.opacity = "0";
        setTimeout(() => layer.style.display = "none", 1000);
    }, 4000);
}

// --- LÃ“GICA DO HUB [PRESERVADA] ---
const JEA_GAMES = [
    {
        title: "NEM PENSAR",
        desc: "Onde o Ã³bvio Ã© o seu maior inimigo. FaÃ§a o grupo adivinhar a palavra secreta, mas cuidado: as respostas mais comuns estÃ£o proibidas!",
        icon: "ðŸ¤«",
        tags: ["PARTY GAME", "CRIATIVIDADE", "RÃPIDO", "2-10 PLAYERS"],
        style: "style-nempensar",
        url: "nem-pensar.html"
    },
    {
        title: "CADÃŠ AS LETRAS?",
        desc: "Seus dedos e sua mente precisam voar. Uma categoria Ã© sorteada: quem consegue encontrar as palavras e descartar suas letras primeiro?",
        icon: "ðŸ”¤",
        tags: ["AGILIDADE", "VOCABULÃRIO", "COMPETITIVO", "2-6 PLAYERS"],
        style: "style-letras",
        url: "letras.html"
    },
    {
        title: "IMPERIUM",
        desc: "NinguÃ©m Ã© o que parece. Use influÃªncias polÃ­ticas e assuma papÃ©is ocultos para desmascarar traidores antes que o trono do Rei caia.",
        icon: "ðŸ°",
        tags: ["ESTRATÃ‰GIA", "BLEFE", "SOCIAL", "4-12 PLAYERS"],
        style: "style-imperium",
        url: "imperium.html"
    },
    {
        title: "SINTONIA",
        desc: "VocÃªs estÃ£o na mesma frequÃªncia? Pense rÃ¡pido, toque nos sensores e fale a mesma palavra que seu parceiro no momento exato da conexÃ£o.",
        icon: "ðŸ§¬",
        tags: ["CONEXÃƒO", "SINCRONIA", "RÃPIDO", "2-10 PLAYERS"],
        style: "style-sintonia",
        url: "sintonia.html"
    },
    {
        title: "ECO",
        desc: "Toque antes que o silÃªncio te pegue. Um tema Ã© revelado e a palavra precisa ecoar no ritmo certo. Errou, hesitou ou repetiu? Prepare-se para o desafio.",
        icon: "ðŸŒ€",
        tags: ["RITMO", "RÃPIDO", "SOCIAL", "3-12 PLAYERS"],
        style: "style-eco",
        url: "eco.html"
    },
    {
        title: "VOCÃŠ NÃƒO ME CONHECE",
        desc: "O quanto vocÃª sabe sobre quem estÃ¡ ao seu lado? Conte histÃ³rias inusitadas e tente descobrir quem estÃ¡ falando a verdade no grupo.",
        icon: "ðŸŽ­",
        tags: ["HISTÃ“RIAS", "SOCIAL", "DEDUÃ‡ÃƒO", "3-8 PLAYERS"],
        style: "style-conhece",
        url: "conhece.html"
    }
];

let cur = 0;
function render() {
    const container = document.getElementById("gameCarousel");
    const dots = document.getElementById("dots");
    container.innerHTML = ""; dots.innerHTML = "";
    JEA_GAMES.forEach((game, idx) => {
        const card = document.createElement("div");
        card.className = `game-card ${game.style}`;
        if(idx === cur) card.classList.add("card-active");
        else if(idx === (cur - 1 + JEA_GAMES.length) % JEA_GAMES.length) card.classList.add("card-left");
        else if(idx === (cur + 1) % JEA_GAMES.length) card.classList.add("card-right");
        else card.classList.add("card-hidden");
        card.innerHTML =
          `<div class="game-icon-slot">${game.icon}</div>
           <div class="game-info">
             <h2>${game.title}</h2>
             <p>${game.desc}</p>
           </div>
           <div class="game-meta">
             <div class="tags">
               ${game.tags.map(t => `<span class="tag">${t}</span>`).join('')}
             </div>
             <button class="btn-play" onclick="location.href='${game.url}'">JOGAR AGORA</button>
           </div>`;
        container.appendChild(card);
        const d = document.createElement("div");
        d.className = `dot ${idx === cur ? 'active' : ''}`;
        dots.appendChild(d);
    });
}
render();

let startX = 0;
document.addEventListener('touchstart', e => startX = e.touches[0].clientX);
document.addEventListener('touchend', e => {
    let diff = startX - e.changedTouches[0].clientX;
    if(Math.abs(diff) > 50) {
        playSwipeS(); // Sonoplastia de deslize adicionada
        if(diff > 0) cur = (cur + 1) % JEA_GAMES.length;
        else cur = (cur - 1 + JEA_GAMES.length) % JEA_GAMES.length;
        render();
    }
});
</script>
</body>
</html>