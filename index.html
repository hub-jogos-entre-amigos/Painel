<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
<title>Jogos Entre Amigos</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#030207">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="JEA Hub">
<link rel="apple-touch-icon" href="icon-192.png">

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
      .then(reg => console.log('Service Worker registrado!', reg))
      .catch(err => console.log('Erro ao registrar SW:', err));
  }
</script>

<style>
:root {
  --bg: #030207;
  --gold: #FFD700;
  --text: #ffffff;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { 
  margin: 0; background: var(--bg); color: var(--text); 
  font-family: 'Inter', sans-serif; height: 100dvh; 
  overflow: hidden; display: flex; justify-content: center;
}

/* --- BOT√ÉO MUDO --- */
#mute-btn {
    position: fixed; top: 20px; left: 20px; width: 40px; height: 40px;
    background: rgba(255, 255, 255, 0.1); border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    z-index: 10000; border: 1px solid rgba(255, 255, 255, 0.2);
    cursor: pointer; transition: 0.3s;
}
#mute-btn:active { transform: scale(0.9); background: rgba(255, 255, 255, 0.2); }
#mute-btn svg { width: 20px; height: 20px; fill: white; }

/* --- VINHETA DE ENTRADA --- */
#intro-container {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--bg); z-index: 9999;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    cursor: pointer; transition: opacity 0.8s ease;
}
.tap-hint { position: absolute; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 4px; font-weight: 900; color: var(--gold); animation: blink 1.5s infinite; }
.logo-wrapper { display: none; flex-direction: column; align-items: center; justify-content: center; }
.logo-wrapper.active { display: flex; }
#jea-logo { width: 220px; height: 220px; filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.4)); animation: logoEntrance 0.8s forwards; }
.phrase { margin-top: 30px; font-size: 1.1rem; color: rgba(255,255,255,0.9); font-style: italic; text-align: center; opacity: 0; animation: fadeIn 1s forwards 0.8s; padding: 0 40px; }

@keyframes logoEntrance { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes blink { 0%, 100% { opacity: 0.2; } 50% { opacity: 1; } }

/* --- HUB --- */
#hub {
  width: 100%; max-width: 500px; height: 100%;
  display: flex; flex-direction: column;
  background: radial-gradient(circle at top, #1a1625 0%, #030207 100%);
}

.header { padding: 15px 20px 5px; text-align: center; flex-shrink: 0; }
.header h1 { font-size: 0.7rem; letter-spacing: 5px; opacity: 0.4; margin: 0; font-weight: 900; text-transform: uppercase; }

.carousel-container {
    flex: 1; position: relative;
    display: flex; align-items: center; justify-content: center;
    perspective: 1200px; overflow: hidden;
}

#gameCarousel { width: 100%; height: 100%; position: relative; display: flex; align-items: center; justify-content: center; transform-style: preserve-3d; }

.game-card {
    position: absolute; width: 88%; height: 94%; max-height: 580px; 
    border-radius: 40px; padding: 30px 25px;
    display: flex; flex-direction: column; align-items: center; text-align: center; justify-content: space-between;
    transition: all 0.8s cubic-bezier(0.2, 1, 0.3, 1);
    background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.1); user-select: none; overflow: hidden;
}

.card-active { z-index: 10; transform: translateX(0) scale(1) translateZ(0); opacity: 1; border-color: var(--c); box-shadow: 0 20px 50px rgba(0,0,0,0.8), 0 0 30px rgba(var(--rgb), 0.2); }
.card-left { z-index: 5; transform: translateX(-45%) scale(0.85) rotateY(25deg) translateZ(-200px); opacity: 0.25; filter: blur(3px); pointer-events: none; }
.card-right { z-index: 5; transform: translateX(45%) scale(0.85) rotateY(-25deg) translateZ(-200px); opacity: 0.25; filter: blur(3px); pointer-events: none; }
.card-hidden { opacity: 0; transform: scale(0.5) translateZ(-500px); pointer-events: none; }

.game-icon-slot { font-size: 6.5rem; flex-shrink: 0; margin-bottom: 5px; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.4)); }
.game-info { flex: 1; display: flex; flex-direction: column; justify-content: center; width: 100%; }
.game-info h2 { font-size: 2.1rem; margin: 0; font-weight: 900; letter-spacing: -1px; text-transform: uppercase; color: var(--c); line-height: 1; }
.game-info p { font-size: 1rem; opacity: 0.7; margin: 12px 0; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; overflow: hidden; }

.game-meta { width: 100%; flex-shrink: 0; }
.tags { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; margin-bottom: 15px; }
.tag { font-size: 0.65rem; padding: 10px; border-radius: 12px; background: rgba(var(--rgb), 0.15); font-weight: 800; color: var(--c); text-transform: uppercase; }

.btn-play { width: 100%; padding: 22px; border-radius: 25px; border: none; font-size: 1.2rem; font-weight: 900; letter-spacing: 2px; cursor: pointer; background: var(--c); color: #000; }

.style-sintonia { --c: #00d4ff; --rgb: 0, 212, 255; }
.style-nempensar { --c: #FFD700; --rgb: 255, 215, 0; }
.style-letras { --c: #9b7cff; --rgb: 155, 124, 255; }
.style-imperium { --c: #ff0033; --rgb: 255, 0, 51; }
.style-conhece { --c: #2dd36f; --rgb: 45, 211, 111; }

.nav-dots { display: flex; gap: 10px; justify-content: center; padding: 10px 0 25px; flex-shrink: 0; }
.dot { width: 8px; height: 8px; border-radius: 4px; background: rgba(255,255,255,0.1); transition: 0.4s; }
.dot.active { width: 35px; background: var(--gold); }
</style>
</head>
<body>

<div id="mute-btn" onclick="toggleMute()">
    <svg id="icon-audio" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
</div>

<div id="intro-container" onclick="iniciarAbertura()">
    <div class="tap-hint" id="hint">Toque para entrar</div>
    <div class="logo-wrapper" id="logo-box">
        <svg id="jea-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <circle cx="50" cy="50" r="48" fill="#FFD700"/>
          <defs>
            <path id="pathTop" d="M 20,50 A 30,30 0 1,1 80,50" fill="none" />
            <path id="pathBottom" d="M 12,50 A 38,38 0 0,0 88,50" fill="none" />
          </defs>
          <text font-family="Arial Black, Arial" font-weight="900" font-size="12" fill="#030207"><textPath href="#pathTop" startOffset="50%" text-anchor="middle">JOGOS</textPath></text>
          <g transform="translate(0, -2)">
            <rect x="31" y="36" width="20" height="32" rx="3" fill="#030207" opacity="0.4" transform="rotate(-20 41 52)"/>
            <rect x="49" y="36" width="20" height="32" rx="3" fill="#030207" opacity="0.7" transform="rotate(20 59 52)"/>
            <rect x="40" y="33" width="20" height="32" rx="3" fill="#030207" stroke="#FFD700" stroke-width="1"/>
            <circle cx="50" cy="39" r="2" fill="#FFD700"/>
          </g>
          <text font-family="Arial Black, Arial" font-weight="900" font-size="10.5" fill="#030207"><textPath href="#pathBottom" startOffset="50%" text-anchor="middle">ENTRE AMIGOS</textPath></text>
        </svg>
        <div class="phrase">"Onde o celular n√£o distancia, aproxima."</div>
    </div>
</div>

<div id="hub">
    <div class="header"><h1>Jogos Entre Amigos</h1></div>
    <div class="carousel-container">
        <div id="gameCarousel"></div>
    </div>
    <div class="nav-dots" id="dots"></div>
</div>

<script>
let audioCtx = null;
let introIniciada = false;
let isMuted = false;

function toggleMute() {
    isMuted = !isMuted;
    const btn = document.getElementById('icon-audio');
    if(isMuted) {
        btn.innerHTML = '<path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73 4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>';
    } else {
        btn.innerHTML = '<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>';
    }
}

function iniciarAbertura() {
    if (introIniciada) return;
    introIniciada = true;
    document.getElementById('hint').style.display = 'none';
    document.getElementById('logo-box').classList.add('active');
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    
    if(!isMuted) {
        [440, 554, 659, 880].forEach((f, i) => playSimpleSfx(f, 'sine', 0.1, i * 0.08, 0.07));
        setTimeout(() => {
            [523, 659, 783, 1046].forEach(f => playSimpleSfx(f, 'sine', 1.2, 0, 0.08));
            playSimpleSfx(100, 'triangle', 0.3, 0, 0.15);
        }, 320);
    }

    setTimeout(() => {
        const intro = document.getElementById('intro-container');
        intro.style.opacity = '0';
        setTimeout(() => intro.remove(), 850);
    }, 3800);
}

function playSimpleSfx(f, t, d, delay, vol) {
    if(isMuted) return;
    const time = audioCtx.currentTime + delay;
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = t; o.frequency.setValueAtTime(f, time);
    g.gain.setValueAtTime(vol, time);
    g.gain.exponentialRampToValueAtTime(0.0001, time + d);
    o.connect(g); g.connect(audioCtx.destination);
    o.start(time); o.stop(time + d);
}

function playSlideSfx() {
    if (!audioCtx || isMuted) return;
    const time = audioCtx.currentTime;
    const o1 = audioCtx.createOscillator();
    const g1 = audioCtx.createGain();
    o1.type = 'sine'; o1.frequency.setValueAtTime(600, time);
    o1.frequency.exponentialRampToValueAtTime(200, time + 0.1);
    g1.gain.setValueAtTime(0.12, time);
    g1.gain.exponentialRampToValueAtTime(0.0001, time + 0.1);
    o1.connect(g1); g1.connect(audioCtx.destination);
    const o2 = audioCtx.createOscillator();
    const g2 = audioCtx.createGain();
    o2.type = 'triangle'; o2.frequency.setValueAtTime(140, time);
    o2.frequency.exponentialRampToValueAtTime(40, time + 0.15);
    g2.gain.setValueAtTime(0.25, time);
    g2.gain.exponentialRampToValueAtTime(0.0001, time + 0.15);
    o2.connect(g2); g2.connect(audioCtx.destination);
    o1.start(time); o1.stop(time + 0.1);
    o2.start(time); o2.stop(time + 0.15);
    if (navigator.vibrate) navigator.vibrate(15);
}

const JEA_GAMES = [
    { title: "NEM PENSAR", desc: "Onde o √≥bvio √© o seu maior inimigo. Fa√ßa o grupo adivinhar a palavra secreta, mas cuidado: as respostas mais comuns est√£o proibidas!", icon: "ü§´", tags: ["PARTY GAME", "CRIATIVIDADE", "R√ÅPIDO", "3-10 PLAYERS"], style: "style-nempensar", url: "nem-pensar.html" },
    { title: "CAD√ä AS LETRAS?", desc: "Seus dedos e sua mente precisam voar. Uma categoria √© sorteada: quem consegue encontrar as palavras e descartar suas letras primeiro?", icon: "üî§", tags: ["AGILIDADE", "VOCABUL√ÅRIO", "COMPETITIVO", "2-6 PLAYERS"], style: "style-letras", url: "letras.html" },
    { title: "IMPERIUM", desc: "Ningu√©m √© o que parece. Use influ√™ncias pol√≠ticas e assuma pap√©is ocultos para desmascarar traidores antes que o trono do Rei caia.", icon: "üè∞", tags: ["ESTRAT√âGIA", "BLEFE", "SOCIAL", "4-12 PLAYERS"], style: "style-imperium", url: "imperium.html" },
    { title: "VOC√ä N√ÉO ME CONHECE", desc: "O quanto voc√™ sabe sobre quem est√° ao seu lado? Conte hist√≥rias inusitadas e tente descobrir quem est√° falando a verdade no grupo.", icon: "üé≠", tags: ["HIST√ìRIAS", "SOCIAL", "DEDU√á√ÉO", "3-8 PLAYERS"], style: "style-conhece", url: "conhece.html" }
];

let cur = 0;

function render() {
    const container = document.getElementById("gameCarousel");
    const dots = document.getElementById("dots");
    container.innerHTML = ""; dots.innerHTML = "";
    JEA_GAMES.forEach((game, idx) => {
        const card = document.createElement("div");
        card.className = `game-card ${game.style}`;
        if(idx === cur) card.classList.add("card-active");
        else if(idx === (cur - 1 + JEA_GAMES.length) % JEA_GAMES.length) card.classList.add("card-left");
        else if(idx === (cur + 1) % JEA_GAMES.length) card.classList.add("card-right");
        else card.classList.add("card-hidden");
        card.innerHTML = `
            <div class="game-icon-slot">${game.icon}</div>
            <div class="game-info">
                <h2>${game.title}</h2>
                <p>${game.desc}</p>
            </div>
            <div class="game-meta">
                <div class="tags">${game.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
                <button class="btn-play" onclick="location.href='${game.url}'">JOGAR AGORA</button>
            </div>
        `;
        container.appendChild(card);
        const d = document.createElement("div");
        d.className = `dot ${idx === cur ? 'active' : ''}`;
        dots.appendChild(d);
    });
}

render();

let startX = 0;
document.addEventListener('touchstart', e => startX = e.touches[0].clientX);
document.addEventListener('touchend', e => {
    let diff = startX - e.changedTouches[0].clientX;
    if(Math.abs(diff) > 50) {
        if(diff > 0) cur = (cur + 1) % JEA_GAMES.length;
        else cur = (cur - 1 + JEA_GAMES.length) % JEA_GAMES.length;
        render();
        playSlideSfx();
    }
});
</script>
</body>
</html>
